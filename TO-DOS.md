# TO-DOS

## Historical Exception Handling Research - 2025-12-07 22:53

- **Research early C++ compiler exception implementations** - Investigate how early C++ compilers (Cfront era, pre-LLVM) implemented exceptions when translating to C, and how similar C++ to C conversion tools handled exception+RAII interaction. **Problem:** Current research shows exception+RAII as primary challenge; historical implementations may reveal proven patterns or simplifications that modern research overlooks. Early compilers had to solve this exact problem when generating C code. **Files:** `.prompts/001-clang-cpp-to-c-converter-research/clang-cpp-to-c-converter-research.md:1200-1450` (exception handling analysis), `.prompts/001-clang-cpp-to-c-converter-research/feasibility-and-roadmap.md:33-43` (exception+RAII challenge). **Solution:** Research Cfront (Bjarne Stroustrup's original C++ to C translator), examine how it handled exceptions in C output; investigate other historical transpilers; look for academic papers on exception handling in C; check if emmtrix documentation reveals their approach; analyze GCC/Clang early exception handling implementations before native code generation.

## Advanced Features Historical Research - 2025-12-08 00:44

- **Research RTTI, virtual inheritance, and coroutines implementations** - Investigate how historical and specialized C++ compilers (Cfront, early GCC/EDG, CUDA C++, embedded C++ compilers) implemented RTTI (typeid/dynamic_cast), virtual inheritance (diamond problem, virtual base pointers), and coroutines (C++20) when generating C or C-like output. **Problem:** Research v1.3 identified these as implementable advanced features with varying complexity but no documented solution patterns yet; historical implementations and specialized compilers (especially CUDA C++ with restricted feature set) may reveal proven approaches or simplifications that make implementation more tractable. **Files:** `.prompts/001-clang-cpp-to-c-converter-research/feasibility-and-roadmap.md:65-70` (remaining manageable challenges), `.prompts/001-clang-cpp-to-c-converter-research/SUMMARY.md:1-234` (research summary). **Solution:** Research Cfront approach to virtual inheritance and RTTI; investigate CUDA C++ restrictions and how nvcc handles these features; examine Comeau C++, EDG, and early GCC implementations; check emmtrix eCPP2C documentation for their approach; analyze Itanium C++ ABI specifications for RTTI table structures and virtual inheritance layouts; look for academic papers on coroutine-to-state-machine transformations.

## AST Transformation for Custom Runtime - 2025-12-08 01:21

- **Investigate AST transformation strategies for custom runtime support** - Analyze whether and how to transform Clang AST to inject custom runtime support for RTTI, exceptions, and other C++ features instead of generating standalone C code with embedded runtime. **Problem:** Current research (v1.4) documents patterns for generating C code with inline runtime support (PNaCl SJLJ exception frames, type_info tables, VTT structures), but it's unclear if transforming the AST before CodeGen to use a separate runtime library would be cleaner/more efficient; need to evaluate trade-offs between inline generation vs. runtime library approach. **Files:** `.prompts/001-clang-cpp-to-c-converter-research/EXCEPTION-HANDLING-SOLUTION.md:1-599` (PNaCl inline pattern), `.prompts/003-advanced-features-research/RTTI-IMPLEMENTATION-GUIDE.md:1-938` (type_info generation), `.prompts/003-advanced-features-research/VIRTUAL-INHERITANCE-GUIDE.md:1-997` (VTT generation), `.prompts/003-advanced-features-research/COROUTINES-GUIDE.md:1-1321` (coroutine frames). **Solution:** Research Clang AST transformation APIs (ASTConsumer, RecursiveASTVisitor modifications); evaluate whether to generate runtime library calls (like libcxxabi) vs. inline runtime code; analyze emmtrix eCPP2C approach (do they use runtime library?); consider hybrid approach where complex runtime (exceptions, RTTI) uses library while simple features (name mangling, vtables) remain inline; document pros/cons of each strategy (code size, portability, debuggability, Frama-C compatibility).

## Documentation Reorganization - 2025-12-08 03:14

- **Reorganize research documentation structure** - Restructure the .prompts/ directory to improve organization, discoverability, and maintainability of research documents by renaming files, moving to appropriate directories, and creating index files. **Problem:** Current research documentation (13,545+ lines across 42 files) lacks clear organizational structure; files are scattered across multiple prompt directories with inconsistent naming; no central index makes it difficult to navigate; completed research phases need better separation from active work. **Files:** `.prompts/001-clang-cpp-to-c-converter-research/` (9 files), `.prompts/002-historical-exception-handling-research/` (3 files), `.prompts/003-advanced-features-research/` (7 files), `.prompts/004-ast-transformation-architecture/` (13 files including research-notes/), `prompts/completed/001-research-cpp-to-c-conversion-tools.md`, `research/cpp-to-c-conversion-tools.md`. **Solution:** Create logical directory structure (docs/, research-archive/, etc.); add index.md files at key levels; consolidate completed research; rename files for consistency; update cross-references in README.md; maintain git history with git mv commands.

